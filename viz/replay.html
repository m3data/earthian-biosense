<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Session Replay — EarthianBioSense</title>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.9.0/p5.min.js"></script>
  <link rel="stylesheet" href="css/replay.css">
</head>
<body>
  <h1>PHENOMENOLOGICAL REPLAY</h1>

  <div id="tabs">
    <div class="tab active" data-view="2d">2D Temporal</div>
    <div class="tab" data-view="3d">3D Topology</div>
  </div>

  <div id="file-input-container">
    <label id="file-label" for="file-input">Load Session (.jsonl)</label>
    <input type="file" id="file-input" accept=".jsonl">
    <div id="session-name"></div>
  </div>

  <div id="canvas-wrapper">
    <div id="canvas-container"></div>
    <div id="legend" class="hidden">
      <div class="legend-title">MODE</div>
      <div class="legend-item"><span class="swatch" data-mode="heightened"></span>heightened</div>
      <div class="legend-item"><span class="swatch" data-mode="subtle"></span>subtle vigilance</div>
      <div class="legend-item"><span class="swatch" data-mode="transitional"></span>transitional</div>
      <div class="legend-item"><span class="swatch" data-mode="settling"></span>settling</div>
      <div class="legend-item"><span class="swatch" data-mode="emerging"></span>emerging</div>
      <div class="legend-item"><span class="swatch" data-mode="coherent"></span>coherent</div>
    </div>
  </div>

  <div id="view-hint"></div>

  <div id="controls">
    <button id="play-btn">Play</button>
    <button id="speed-05">0.5x</button>
    <button id="speed-1" class="active">1x</button>
    <button id="speed-2">2x</button>
    <button id="speed-4">4x</button>
  </div>

  <div id="timeline-container">
    <input type="range" id="timeline" min="0" max="100" value="0">
    <div id="time-display">
      <span id="time-current">00:00</span>
      <span id="time-total">00:00</span>
    </div>
  </div>

  <div id="phase-label">— waiting for session —</div>

  <div id="metrics-panel">
    <div class="metric">
      <div class="metric-label">Heart Rate</div>
      <div class="metric-value" id="m-hr">—</div>
      <div class="metric-sub">bpm</div>
    </div>
    <div class="metric">
      <div class="metric-label">Coherence</div>
      <div class="metric-value" id="m-coh">—</div>
      <div class="metric-sub" id="m-coh-label">—</div>
    </div>
    <div class="metric">
      <div class="metric-label">Breath</div>
      <div class="metric-value" id="m-breath">—</div>
      <div class="metric-sub">cycles/min</div>
    </div>
    <div class="metric">
      <div class="metric-label">Stability</div>
      <div class="metric-value" id="m-stability">—</div>
      <div class="metric-sub" id="m-mode">—</div>
    </div>
  </div>

  <script type="module" src="js/main.js"></script>
</body>
</html>
